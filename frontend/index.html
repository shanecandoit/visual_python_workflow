<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Workflow Visualizer</title>
    <!-- Bootstrap CSS (Dark Theme via data-bs-theme) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Optional: Link to custom style.css -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* Basic styling for the canvas and nodes */
        body {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Prevent body scrollbars */
        }
        .main-content {
            display: flex;
            flex-grow: 1;
            overflow: hidden; /* Prevent flex container scrollbars */
        }

    </style>
</head>
<body>
    <!-- Main Flex Container -->
    <div class="main-content">
        <!-- Workflow Canvas Area -->
        <div id="workflow-canvas-container">
            <svg id="connections-svg" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
                <defs>
                <!-- Standard arrowhead for workflow connections -->
                <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                        refX="10" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#999" />
                </marker>
                
                <!-- Special arrowhead for output connections -->
                <marker id="output-arrowhead" markerWidth="10" markerHeight="7" 
                        refX="10" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#00a0ff" />
                </marker>
                </defs>
            </svg>
            <div id="workflow-canvas"></div>
        </div>

        <!-- Sidebar -->
        <div id="sidebar">
            <h5>Controls</h5>
            <div class="controls">
                <button id="load-button" class="btn btn-primary btn-sm">Load Workflow (.md)</button>
                <button id="run-all-button" class="btn btn-success btn-sm" disabled>Run All</button>
                <button id="run-selected-button" class="btn btn-warning btn-sm" disabled>Run Selected</button>
            </div>

            <hr>

            <h5>Selected Node Details</h5>
            <div id="node-details-header">
                <strong id="selected-node-id">None Selected</strong>
            </div>
            <div id="node-details">
                <p class="text-muted">Click on a node to see its details or cached output.</p>
            </div>

            <div id="error-area">
                <!-- Error messages will appear here -->
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Application JavaScript -->
    <script src="app.js"></script>
</body>
</html>